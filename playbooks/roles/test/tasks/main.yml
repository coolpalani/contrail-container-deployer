---
- name: get_vars
  debug:
    msg: "{{ contrail_configuration }}"

#- name: "Build hosts file"
#  lineinfile: dest=/etc/hosts regexp='.*{{ item }}$' line="{{ item }} {{ item.replace('.','_') }}" state=present
#  with_items: "{{ hostvars[inventory_hostname].groups.container_vms }}"


- name: create /tmp/common.env
  file:
    path: /tmp/common.env
    state: touch

- name: create commens.env
  lineinfile: dest=/tmp/common.env regexp='.*{{ item.key }}$' line="{{ item.key }}={{ item.value }}" state=present
  with_dict: "{{ contrail_configuration }}"
